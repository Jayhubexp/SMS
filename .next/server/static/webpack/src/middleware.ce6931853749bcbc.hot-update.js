"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("src/middleware",{

/***/ "(middleware)/./src/middleware.ts":
/*!***************************!*\
  !*** ./src/middleware.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/ssr */ \"(middleware)/./node_modules/@supabase/ssr/dist/module/index.js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @supabase/supabase-js */ \"(middleware)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n\n\n\nasync function middleware(request) {\n    let response = next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.next({\n        request: {\n            headers: request.headers\n        }\n    });\n    const supabase = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(\"https://svakdlwfoevmbdejhtyg.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN2YWtkbHdmb2V2bWJkZWpodHlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ1MDY4NzAsImV4cCI6MjA4MDA4Mjg3MH0.Dbgt7kSPzK1ZieC5U4I_atBDwWtRPDVNSXu5ZpfXg38\", {\n        cookies: {\n            getAll () {\n                return request.cookies.getAll();\n            },\n            setAll (cookiesToSet) {\n                cookiesToSet.forEach(({ name, value, options })=>request.cookies.set(name, value));\n                response = next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.next({\n                    request\n                });\n                cookiesToSet.forEach(({ name, value, options })=>response.cookies.set(name, value, options));\n            }\n        }\n    });\n    const { data: { user } } = await supabase.auth.getUser();\n    // Create Admin Client for Role Check (Bypasses RLS)\n    const supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(\"https://svakdlwfoevmbdejhtyg.supabase.co\", process.env.SUPABASE_SERVICE_ROLE_KEY, {\n        auth: {\n            persistSession: false\n        }\n    });\n    const path = request.nextUrl.pathname;\n    const isPublicRoute = path === \"/\" || path.startsWith(\"/sign-in\");\n    const isDashboardRoute = path.startsWith(\"/managing-director\") || path.startsWith(\"/secretary\") || path.startsWith(\"/teacher\") || path.startsWith(\"/student\") || path.startsWith(\"/parent\") || path.startsWith(\"/profile\") || path.startsWith(\"/list\") || path.startsWith(\"/finance\") || path.startsWith(\"/settings\");\n    const redirect = (url)=>{\n        const redirectResponse = next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(url);\n        const cookiesToSet = response.cookies.getAll();\n        cookiesToSet.forEach((cookie)=>redirectResponse.cookies.set(cookie.name, cookie.value));\n        return redirectResponse;\n    };\n    // 1. UNAUTHENTICATED USERS -> Redirect to Sign-in\n    if (!user) {\n        if (isDashboardRoute) {\n            return redirect(new URL(\"/sign-in\", request.url));\n        }\n        return response;\n    }\n    // 2. AUTHENTICATED USERS\n    // Note: We removed the forced password change check here to allow optional updates later.\n    // Redirect away from Public Routes (Login/Home) to Dashboard\n    if (isPublicRoute) {\n        try {\n            const { data: roleData } = await supabaseAdmin.from(\"user_roles\").select(\"roles(name)\").eq(\"user_id\", user.id).single();\n            // @ts-ignore\n            const roleName = roleData?.roles?.name || roleData?.roles?.[0]?.name;\n            const userRole = roleName ? roleName.toLowerCase() : \"student\";\n            const dashboardMap = {\n                managing_director: \"/managing-director\",\n                secretary: \"/secretary\",\n                system_administrator: \"/system-administrator\",\n                teacher: \"/teacher\",\n                student: \"/student\",\n                parent: \"/parent\"\n            };\n            const targetPath = dashboardMap[userRole] || \"/student\";\n            if (path !== targetPath) {\n                return redirect(new URL(targetPath, request.url));\n            }\n        } catch (error) {\n            console.error(\"Middleware Role Fetch Error:\", error);\n            return redirect(new URL(\"/student\", request.url));\n        }\n    }\n    return response;\n}\nconst config = {\n    matcher: [\n        \"/((?!_next/static|_next/image|favicon.ico|.*\\\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)\"\n    ]\n}; // import { createServerClient } from \"@supabase/ssr\";\n // import { createClient } from \"@supabase/supabase-js\";\n // import { type NextRequest, NextResponse } from \"next/server\";\n // export async function middleware(request: NextRequest) {\n // \t// 1. Initialize Response\n // \tlet response = NextResponse.next({\n // \t\trequest: {\n // \t\t\theaders: request.headers,\n // \t\t},\n // \t});\n // \t// 2. Create Supabase Client (Handles Auth Cookies)\n // \tconst supabase = createServerClient(\n // \t\tprocess.env.NEXT_PUBLIC_SUPABASE_URL!,\n // \t\tprocess.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n // \t\t{\n // \t\t\tcookies: {\n // \t\t\t\tgetAll() {\n // \t\t\t\t\treturn request.cookies.getAll();\n // \t\t\t\t},\n // \t\t\t\tsetAll(cookiesToSet) {\n // \t\t\t\t\tcookiesToSet.forEach(({ name, value, options }) =>\n // \t\t\t\t\t\trequest.cookies.set(name, value),\n // \t\t\t\t\t);\n // \t\t\t\t\tresponse = NextResponse.next({\n // \t\t\t\t\t\trequest,\n // \t\t\t\t\t});\n // \t\t\t\t\tcookiesToSet.forEach(({ name, value, options }) =>\n // \t\t\t\t\t\tresponse.cookies.set(name, value, options),\n // \t\t\t\t\t);\n // \t\t\t\t},\n // \t\t\t},\n // \t\t},\n // \t);\n // \t// 3. Refresh Session & Get User\n // \t// This updates the auth cookie if needed\n // \tconst {\n // \t\tdata: { user },\n // \t} = await supabase.auth.getUser();\n // \t// 4. Define Paths\n // \tconst path = request.nextUrl.pathname;\n // \tconst isPublicRoute = path === \"/\" || path.startsWith(\"/sign-in\");\n // \t// Dashboard/Protected Routes\n // \tconst isDashboardRoute =\n // \t\tpath.startsWith(\"/managing-director\") ||\n // \t\tpath.startsWith(\"/secretary\") ||\n // \t\tpath.startsWith(\"/teacher\") ||\n // \t\tpath.startsWith(\"/student\") ||\n // \t\tpath.startsWith(\"/parent\") ||\n // \t\tpath.startsWith(\"/profile\") ||\n // \t\tpath.startsWith(\"/list\") ||\n // \t\tpath.startsWith(\"/finance\") ||\n // \t\tpath.startsWith(\"/settings\");\n // \t// Helper: Redirect with cookies preserved\n // \tconst redirect = (url: URL) => {\n // \t\tconst redirectResponse = NextResponse.redirect(url);\n // \t\tconst cookiesToSet = response.cookies.getAll();\n // \t\tcookiesToSet.forEach((cookie) =>\n // \t\t\tredirectResponse.cookies.set(cookie.name, cookie.value),\n // \t\t);\n // \t\treturn redirectResponse;\n // \t};\n // \t// --- LOGIC BLOCK 1: UNAUTHENTICATED USERS ---\n // \tif (!user) {\n // \t\t// If trying to access a protected route, redirect to sign-in\n // \t\tif (isDashboardRoute) {\n // \t\t\treturn redirect(new URL(\"/sign-in\", request.url));\n // \t\t}\n // \t\t// Allow public routes (Landing page / Sign-in)\n // \t\treturn response;\n // \t}\n // \t// --- LOGIC BLOCK 2: AUTHENTICATED USERS ---\n // \t// Redirect authenticated users away from Public Routes (Login/Home) to Dashboard\n // \tif (isPublicRoute) {\n // \t\ttry {\n // \t\t\t// Create Admin Client for Role Check (Bypasses RLS)\n // \t\t\t// Only created if needed to save resources\n // \t\t\tconst supabaseAdmin = createClient(\n // \t\t\t\tprocess.env.NEXT_PUBLIC_SUPABASE_URL!,\n // \t\t\t\tprocess.env.SUPABASE_SERVICE_ROLE_KEY!,\n // \t\t\t\t{ auth: { persistSession: false } },\n // \t\t\t);\n // \t\t\tconst { data: roleData } = await supabaseAdmin\n // \t\t\t\t.from(\"user_roles\")\n // \t\t\t\t.select(\"roles(name)\")\n // \t\t\t\t.eq(\"user_id\", user.id)\n // \t\t\t\t.single();\n // \t\t\t// @ts-ignore\n // \t\t\tconst roleName = roleData?.roles?.name || roleData?.roles?.[0]?.name;\n // \t\t\tconst userRole = roleName ? roleName.toLowerCase() : \"student\";\n // \t\t\tconst dashboardMap: Record<string, string> = {\n // \t\t\t\tmanaging_director: \"/managing-director\",\n // \t\t\t\tsecretary: \"/secretary\",\n // \t\t\t\tsystem_administrator: \"/system-administrator\",\n // \t\t\t\tteacher: \"/teacher\",\n // \t\t\t\tstudent: \"/student\",\n // \t\t\t\tparent: \"/parent\",\n // \t\t\t};\n // \t\t\tconst targetPath = dashboardMap[userRole] || \"/student\";\n // \t\t\t// Only redirect if not already there\n // \t\t\tif (path !== targetPath) {\n // \t\t\t\treturn redirect(new URL(targetPath, request.url));\n // \t\t\t}\n // \t\t} catch (error) {\n // \t\t\tconsole.error(\"Middleware Role Fetch Error:\", error);\n // \t\t\t// Fallback to student if role fetch fails\n // \t\t\treturn redirect(new URL(\"/student\", request.url));\n // \t\t}\n // \t}\n // \treturn response;\n // }\n // export const config = {\n // \tmatcher: [\n // \t\t/*\n // \t\t * Match all request paths except for:\n // \t\t * - _next/static (static files)\n // \t\t * - _next/image (image optimization files)\n // \t\t * - favicon.ico (favicon file)\n // \t\t * - public folder assets (images, etc)\n // \t\t * - api routes (if any are public)\n // \t\t */\n // \t\t\"/((?!_next/static|_next/image|favicon.ico|.*\\\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)\",\n // \t],\n // };\n // import { type NextRequest, NextResponse } from \"next/server\";\n // import { createServerClient } from \"@supabase/ssr\";\n // export async function middleware(request: NextRequest) {\n // \t// 1. Create an initial response\n // \tlet supabaseResponse = NextResponse.next({\n // \t\trequest,\n // \t});\n // \tconst supabase = createServerClient(\n // \t\tprocess.env.NEXT_PUBLIC_SUPABASE_URL!,\n // \t\tprocess.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n // \t\t{\n // \t\t\tcookies: {\n // \t\t\t\tgetAll() {\n // \t\t\t\t\treturn request.cookies.getAll();\n // \t\t\t\t},\n // \t\t\t\tsetAll(cookiesToSet) {\n // \t\t\t\t\t// Fix: Update both the Request (for the app) and Response (for the browser)\n // \t\t\t\t\tcookiesToSet.forEach(({ name, value, options }) =>\n // \t\t\t\t\t\trequest.cookies.set(name, value),\n // \t\t\t\t\t);\n // \t\t\t\t\tsupabaseResponse = NextResponse.next({\n // \t\t\t\t\t\trequest,\n // \t\t\t\t\t});\n // \t\t\t\t\tcookiesToSet.forEach(({ name, value, options }) =>\n // \t\t\t\t\t\tsupabaseResponse.cookies.set(name, value, options),\n // \t\t\t\t\t);\n // \t\t\t\t},\n // \t\t\t},\n // \t\t},\n // \t);\n // \t// 2. Refresh Session\n // \t// This will trigger 'setAll' if the token needs refreshing\n // \tconst {\n // \t\tdata: { user },\n // \t} = await supabase.auth.getUser();\n // \treturn supabaseResponse;\n // }\n // export const config = {\n // \tmatcher: [\"/((?!_next/static|_next/image|favicon.ico|public|api).*)\"],\n // };\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxxQ0FBcUM7Q0FDckMsZ0RBQWdEO0NBQ2hELG9DQUFvQztDQUNwQyw0Q0FBNEM7Q0FDNUMsd0NBQXdDO0NBQ3hDLFFBQVE7Q0FDUix5RkFBeUY7Q0FDekYsTUFBTTtDQUNOLEtBQUs7Q0FFTCxnRUFBZ0U7Q0FDaEUsc0RBQXNEO0NBRXRELDJEQUEyRDtDQUMzRCxvQ0FBb0M7Q0FDcEMsOENBQThDO0NBQzlDLGFBQWE7Q0FDYixPQUFPO0NBRVAsd0NBQXdDO0NBQ3hDLDJDQUEyQztDQUMzQyxnREFBZ0Q7Q0FDaEQsTUFBTTtDQUNOLGdCQUFnQjtDQUNoQixpQkFBaUI7Q0FDakIsd0NBQXdDO0NBQ3hDLFNBQVM7Q0FDVCw2QkFBNkI7Q0FDN0Isb0ZBQW9GO0NBQ3BGLDBEQUEwRDtDQUMxRCwwQ0FBMEM7Q0FDMUMsVUFBVTtDQUVWLDhDQUE4QztDQUM5QyxpQkFBaUI7Q0FDakIsV0FBVztDQUVYLDBEQUEwRDtDQUMxRCw0REFBNEQ7Q0FDNUQsVUFBVTtDQUNWLFNBQVM7Q0FDVCxRQUFRO0NBQ1IsT0FBTztDQUNQLE1BQU07Q0FFTix5QkFBeUI7Q0FDekIsK0RBQStEO0NBQy9ELFdBQVc7Q0FDWCxvQkFBb0I7Q0FDcEIsc0NBQXNDO0NBRXRDLDRCQUE0QjtDQUM1QixJQUFJO0NBRUosMEJBQTBCO0NBQzFCLDBFQUEwRTtDQUMxRSxLQUFLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9taWRkbGV3YXJlLnRzP2QxOTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlU2VydmVyQ2xpZW50IH0gZnJvbSBcIkBzdXBhYmFzZS9zc3JcIjtcclxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSBcIkBzdXBhYmFzZS9zdXBhYmFzZS1qc1wiO1xyXG5pbXBvcnQgeyB0eXBlIE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtaWRkbGV3YXJlKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcblx0bGV0IHJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLm5leHQoe1xyXG5cdFx0cmVxdWVzdDoge1xyXG5cdFx0XHRoZWFkZXJzOiByZXF1ZXN0LmhlYWRlcnMsXHJcblx0XHR9LFxyXG5cdH0pO1xyXG5cclxuXHRjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZVNlcnZlckNsaWVudChcclxuXHRcdHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXHJcblx0XHRwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSEsXHJcblx0XHR7XHJcblx0XHRcdGNvb2tpZXM6IHtcclxuXHRcdFx0XHRnZXRBbGwoKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gcmVxdWVzdC5jb29raWVzLmdldEFsbCgpO1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0c2V0QWxsKGNvb2tpZXNUb1NldCkge1xyXG5cdFx0XHRcdFx0Y29va2llc1RvU2V0LmZvckVhY2goKHsgbmFtZSwgdmFsdWUsIG9wdGlvbnMgfSkgPT5cclxuXHRcdFx0XHRcdFx0cmVxdWVzdC5jb29raWVzLnNldChuYW1lLCB2YWx1ZSksXHJcblx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0cmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UubmV4dCh7XHJcblx0XHRcdFx0XHRcdHJlcXVlc3QsXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdGNvb2tpZXNUb1NldC5mb3JFYWNoKCh7IG5hbWUsIHZhbHVlLCBvcHRpb25zIH0pID0+XHJcblx0XHRcdFx0XHRcdHJlc3BvbnNlLmNvb2tpZXMuc2V0KG5hbWUsIHZhbHVlLCBvcHRpb25zKSxcclxuXHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0fSxcclxuXHRcdH0sXHJcblx0KTtcclxuXHJcblx0Y29uc3Qge1xyXG5cdFx0ZGF0YTogeyB1c2VyIH0sXHJcblx0fSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpO1xyXG5cclxuXHQvLyBDcmVhdGUgQWRtaW4gQ2xpZW50IGZvciBSb2xlIENoZWNrIChCeXBhc3NlcyBSTFMpXHJcblx0Y29uc3Qgc3VwYWJhc2VBZG1pbiA9IGNyZWF0ZUNsaWVudChcclxuXHRcdHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXHJcblx0XHRwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZISxcclxuXHRcdHsgYXV0aDogeyBwZXJzaXN0U2Vzc2lvbjogZmFsc2UgfSB9LFxyXG5cdCk7XHJcblxyXG5cdGNvbnN0IHBhdGggPSByZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWU7XHJcblx0Y29uc3QgaXNQdWJsaWNSb3V0ZSA9IHBhdGggPT09IFwiL1wiIHx8IHBhdGguc3RhcnRzV2l0aChcIi9zaWduLWluXCIpO1xyXG5cclxuXHRjb25zdCBpc0Rhc2hib2FyZFJvdXRlID1cclxuXHRcdHBhdGguc3RhcnRzV2l0aChcIi9tYW5hZ2luZy1kaXJlY3RvclwiKSB8fFxyXG5cdFx0cGF0aC5zdGFydHNXaXRoKFwiL3NlY3JldGFyeVwiKSB8fFxyXG5cdFx0cGF0aC5zdGFydHNXaXRoKFwiL3RlYWNoZXJcIikgfHxcclxuXHRcdHBhdGguc3RhcnRzV2l0aChcIi9zdHVkZW50XCIpIHx8XHJcblx0XHRwYXRoLnN0YXJ0c1dpdGgoXCIvcGFyZW50XCIpIHx8XHJcblx0XHRwYXRoLnN0YXJ0c1dpdGgoXCIvcHJvZmlsZVwiKSB8fFxyXG5cdFx0cGF0aC5zdGFydHNXaXRoKFwiL2xpc3RcIikgfHxcclxuXHRcdHBhdGguc3RhcnRzV2l0aChcIi9maW5hbmNlXCIpIHx8XHJcblx0XHRwYXRoLnN0YXJ0c1dpdGgoXCIvc2V0dGluZ3NcIik7XHJcblxyXG5cdGNvbnN0IHJlZGlyZWN0ID0gKHVybDogVVJMKSA9PiB7XHJcblx0XHRjb25zdCByZWRpcmVjdFJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KHVybCk7XHJcblx0XHRjb25zdCBjb29raWVzVG9TZXQgPSByZXNwb25zZS5jb29raWVzLmdldEFsbCgpO1xyXG5cdFx0Y29va2llc1RvU2V0LmZvckVhY2goKGNvb2tpZSkgPT5cclxuXHRcdFx0cmVkaXJlY3RSZXNwb25zZS5jb29raWVzLnNldChjb29raWUubmFtZSwgY29va2llLnZhbHVlKSxcclxuXHRcdCk7XHJcblx0XHRyZXR1cm4gcmVkaXJlY3RSZXNwb25zZTtcclxuXHR9O1xyXG5cclxuXHQvLyAxLiBVTkFVVEhFTlRJQ0FURUQgVVNFUlMgLT4gUmVkaXJlY3QgdG8gU2lnbi1pblxyXG5cdGlmICghdXNlcikge1xyXG5cdFx0aWYgKGlzRGFzaGJvYXJkUm91dGUpIHtcclxuXHRcdFx0cmV0dXJuIHJlZGlyZWN0KG5ldyBVUkwoXCIvc2lnbi1pblwiLCByZXF1ZXN0LnVybCkpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHJlc3BvbnNlO1xyXG5cdH1cclxuXHJcblx0Ly8gMi4gQVVUSEVOVElDQVRFRCBVU0VSU1xyXG5cdC8vIE5vdGU6IFdlIHJlbW92ZWQgdGhlIGZvcmNlZCBwYXNzd29yZCBjaGFuZ2UgY2hlY2sgaGVyZSB0byBhbGxvdyBvcHRpb25hbCB1cGRhdGVzIGxhdGVyLlxyXG5cclxuXHQvLyBSZWRpcmVjdCBhd2F5IGZyb20gUHVibGljIFJvdXRlcyAoTG9naW4vSG9tZSkgdG8gRGFzaGJvYXJkXHJcblx0aWYgKGlzUHVibGljUm91dGUpIHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnN0IHsgZGF0YTogcm9sZURhdGEgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuXHRcdFx0XHQuZnJvbShcInVzZXJfcm9sZXNcIilcclxuXHRcdFx0XHQuc2VsZWN0KFwicm9sZXMobmFtZSlcIilcclxuXHRcdFx0XHQuZXEoXCJ1c2VyX2lkXCIsIHVzZXIuaWQpXHJcblx0XHRcdFx0LnNpbmdsZSgpO1xyXG5cclxuXHRcdFx0Ly8gQHRzLWlnbm9yZVxyXG5cdFx0XHRjb25zdCByb2xlTmFtZSA9IHJvbGVEYXRhPy5yb2xlcz8ubmFtZSB8fCByb2xlRGF0YT8ucm9sZXM/LlswXT8ubmFtZTtcclxuXHRcdFx0Y29uc3QgdXNlclJvbGUgPSByb2xlTmFtZSA/IHJvbGVOYW1lLnRvTG93ZXJDYXNlKCkgOiBcInN0dWRlbnRcIjtcclxuXHJcblx0XHRcdGNvbnN0IGRhc2hib2FyZE1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcclxuXHRcdFx0XHRtYW5hZ2luZ19kaXJlY3RvcjogXCIvbWFuYWdpbmctZGlyZWN0b3JcIixcclxuXHRcdFx0XHRzZWNyZXRhcnk6IFwiL3NlY3JldGFyeVwiLFxyXG5cdFx0XHRcdHN5c3RlbV9hZG1pbmlzdHJhdG9yOiBcIi9zeXN0ZW0tYWRtaW5pc3RyYXRvclwiLFxyXG5cdFx0XHRcdHRlYWNoZXI6IFwiL3RlYWNoZXJcIixcclxuXHRcdFx0XHRzdHVkZW50OiBcIi9zdHVkZW50XCIsXHJcblx0XHRcdFx0cGFyZW50OiBcIi9wYXJlbnRcIixcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdGNvbnN0IHRhcmdldFBhdGggPSBkYXNoYm9hcmRNYXBbdXNlclJvbGVdIHx8IFwiL3N0dWRlbnRcIjtcclxuXHJcblx0XHRcdGlmIChwYXRoICE9PSB0YXJnZXRQYXRoKSB7XHJcblx0XHRcdFx0cmV0dXJuIHJlZGlyZWN0KG5ldyBVUkwodGFyZ2V0UGF0aCwgcmVxdWVzdC51cmwpKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihcIk1pZGRsZXdhcmUgUm9sZSBGZXRjaCBFcnJvcjpcIiwgZXJyb3IpO1xyXG5cdFx0XHRyZXR1cm4gcmVkaXJlY3QobmV3IFVSTChcIi9zdHVkZW50XCIsIHJlcXVlc3QudXJsKSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gcmVzcG9uc2U7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcblx0bWF0Y2hlcjogW1xyXG5cdFx0XCIvKCg/IV9uZXh0L3N0YXRpY3xfbmV4dC9pbWFnZXxmYXZpY29uLmljb3wuKlxcXFwuKD86c3ZnfHBuZ3xqcGd8anBlZ3xnaWZ8d2VicCkkKS4qKVwiLFxyXG5cdF0sXHJcbn07XHJcblxyXG4vLyBpbXBvcnQgeyBjcmVhdGVTZXJ2ZXJDbGllbnQgfSBmcm9tIFwiQHN1cGFiYXNlL3NzclwiO1xyXG4vLyBpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tIFwiQHN1cGFiYXNlL3N1cGFiYXNlLWpzXCI7XHJcbi8vIGltcG9ydCB7IHR5cGUgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xyXG5cclxuLy8gZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1pZGRsZXdhcmUocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuLy8gXHQvLyAxLiBJbml0aWFsaXplIFJlc3BvbnNlXHJcbi8vIFx0bGV0IHJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLm5leHQoe1xyXG4vLyBcdFx0cmVxdWVzdDoge1xyXG4vLyBcdFx0XHRoZWFkZXJzOiByZXF1ZXN0LmhlYWRlcnMsXHJcbi8vIFx0XHR9LFxyXG4vLyBcdH0pO1xyXG5cclxuLy8gXHQvLyAyLiBDcmVhdGUgU3VwYWJhc2UgQ2xpZW50IChIYW5kbGVzIEF1dGggQ29va2llcylcclxuLy8gXHRjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZVNlcnZlckNsaWVudChcclxuLy8gXHRcdHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXHJcbi8vIFx0XHRwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSEsXHJcbi8vIFx0XHR7XHJcbi8vIFx0XHRcdGNvb2tpZXM6IHtcclxuLy8gXHRcdFx0XHRnZXRBbGwoKSB7XHJcbi8vIFx0XHRcdFx0XHRyZXR1cm4gcmVxdWVzdC5jb29raWVzLmdldEFsbCgpO1xyXG4vLyBcdFx0XHRcdH0sXHJcbi8vIFx0XHRcdFx0c2V0QWxsKGNvb2tpZXNUb1NldCkge1xyXG4vLyBcdFx0XHRcdFx0Y29va2llc1RvU2V0LmZvckVhY2goKHsgbmFtZSwgdmFsdWUsIG9wdGlvbnMgfSkgPT5cclxuLy8gXHRcdFx0XHRcdFx0cmVxdWVzdC5jb29raWVzLnNldChuYW1lLCB2YWx1ZSksXHJcbi8vIFx0XHRcdFx0XHQpO1xyXG4vLyBcdFx0XHRcdFx0cmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UubmV4dCh7XHJcbi8vIFx0XHRcdFx0XHRcdHJlcXVlc3QsXHJcbi8vIFx0XHRcdFx0XHR9KTtcclxuLy8gXHRcdFx0XHRcdGNvb2tpZXNUb1NldC5mb3JFYWNoKCh7IG5hbWUsIHZhbHVlLCBvcHRpb25zIH0pID0+XHJcbi8vIFx0XHRcdFx0XHRcdHJlc3BvbnNlLmNvb2tpZXMuc2V0KG5hbWUsIHZhbHVlLCBvcHRpb25zKSxcclxuLy8gXHRcdFx0XHRcdCk7XHJcbi8vIFx0XHRcdFx0fSxcclxuLy8gXHRcdFx0fSxcclxuLy8gXHRcdH0sXHJcbi8vIFx0KTtcclxuXHJcbi8vIFx0Ly8gMy4gUmVmcmVzaCBTZXNzaW9uICYgR2V0IFVzZXJcclxuLy8gXHQvLyBUaGlzIHVwZGF0ZXMgdGhlIGF1dGggY29va2llIGlmIG5lZWRlZFxyXG4vLyBcdGNvbnN0IHtcclxuLy8gXHRcdGRhdGE6IHsgdXNlciB9LFxyXG4vLyBcdH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKTtcclxuXHJcbi8vIFx0Ly8gNC4gRGVmaW5lIFBhdGhzXHJcbi8vIFx0Y29uc3QgcGF0aCA9IHJlcXVlc3QubmV4dFVybC5wYXRobmFtZTtcclxuLy8gXHRjb25zdCBpc1B1YmxpY1JvdXRlID0gcGF0aCA9PT0gXCIvXCIgfHwgcGF0aC5zdGFydHNXaXRoKFwiL3NpZ24taW5cIik7XHJcblxyXG4vLyBcdC8vIERhc2hib2FyZC9Qcm90ZWN0ZWQgUm91dGVzXHJcbi8vIFx0Y29uc3QgaXNEYXNoYm9hcmRSb3V0ZSA9XHJcbi8vIFx0XHRwYXRoLnN0YXJ0c1dpdGgoXCIvbWFuYWdpbmctZGlyZWN0b3JcIikgfHxcclxuLy8gXHRcdHBhdGguc3RhcnRzV2l0aChcIi9zZWNyZXRhcnlcIikgfHxcclxuLy8gXHRcdHBhdGguc3RhcnRzV2l0aChcIi90ZWFjaGVyXCIpIHx8XHJcbi8vIFx0XHRwYXRoLnN0YXJ0c1dpdGgoXCIvc3R1ZGVudFwiKSB8fFxyXG4vLyBcdFx0cGF0aC5zdGFydHNXaXRoKFwiL3BhcmVudFwiKSB8fFxyXG4vLyBcdFx0cGF0aC5zdGFydHNXaXRoKFwiL3Byb2ZpbGVcIikgfHxcclxuLy8gXHRcdHBhdGguc3RhcnRzV2l0aChcIi9saXN0XCIpIHx8XHJcbi8vIFx0XHRwYXRoLnN0YXJ0c1dpdGgoXCIvZmluYW5jZVwiKSB8fFxyXG4vLyBcdFx0cGF0aC5zdGFydHNXaXRoKFwiL3NldHRpbmdzXCIpO1xyXG5cclxuLy8gXHQvLyBIZWxwZXI6IFJlZGlyZWN0IHdpdGggY29va2llcyBwcmVzZXJ2ZWRcclxuLy8gXHRjb25zdCByZWRpcmVjdCA9ICh1cmw6IFVSTCkgPT4ge1xyXG4vLyBcdFx0Y29uc3QgcmVkaXJlY3RSZXNwb25zZSA9IE5leHRSZXNwb25zZS5yZWRpcmVjdCh1cmwpO1xyXG4vLyBcdFx0Y29uc3QgY29va2llc1RvU2V0ID0gcmVzcG9uc2UuY29va2llcy5nZXRBbGwoKTtcclxuLy8gXHRcdGNvb2tpZXNUb1NldC5mb3JFYWNoKChjb29raWUpID0+XHJcbi8vIFx0XHRcdHJlZGlyZWN0UmVzcG9uc2UuY29va2llcy5zZXQoY29va2llLm5hbWUsIGNvb2tpZS52YWx1ZSksXHJcbi8vIFx0XHQpO1xyXG4vLyBcdFx0cmV0dXJuIHJlZGlyZWN0UmVzcG9uc2U7XHJcbi8vIFx0fTtcclxuXHJcbi8vIFx0Ly8gLS0tIExPR0lDIEJMT0NLIDE6IFVOQVVUSEVOVElDQVRFRCBVU0VSUyAtLS1cclxuXHJcbi8vIFx0aWYgKCF1c2VyKSB7XHJcbi8vIFx0XHQvLyBJZiB0cnlpbmcgdG8gYWNjZXNzIGEgcHJvdGVjdGVkIHJvdXRlLCByZWRpcmVjdCB0byBzaWduLWluXHJcbi8vIFx0XHRpZiAoaXNEYXNoYm9hcmRSb3V0ZSkge1xyXG4vLyBcdFx0XHRyZXR1cm4gcmVkaXJlY3QobmV3IFVSTChcIi9zaWduLWluXCIsIHJlcXVlc3QudXJsKSk7XHJcbi8vIFx0XHR9XHJcbi8vIFx0XHQvLyBBbGxvdyBwdWJsaWMgcm91dGVzIChMYW5kaW5nIHBhZ2UgLyBTaWduLWluKVxyXG4vLyBcdFx0cmV0dXJuIHJlc3BvbnNlO1xyXG4vLyBcdH1cclxuXHJcbi8vIFx0Ly8gLS0tIExPR0lDIEJMT0NLIDI6IEFVVEhFTlRJQ0FURUQgVVNFUlMgLS0tXHJcblxyXG4vLyBcdC8vIFJlZGlyZWN0IGF1dGhlbnRpY2F0ZWQgdXNlcnMgYXdheSBmcm9tIFB1YmxpYyBSb3V0ZXMgKExvZ2luL0hvbWUpIHRvIERhc2hib2FyZFxyXG4vLyBcdGlmIChpc1B1YmxpY1JvdXRlKSB7XHJcbi8vIFx0XHR0cnkge1xyXG4vLyBcdFx0XHQvLyBDcmVhdGUgQWRtaW4gQ2xpZW50IGZvciBSb2xlIENoZWNrIChCeXBhc3NlcyBSTFMpXHJcbi8vIFx0XHRcdC8vIE9ubHkgY3JlYXRlZCBpZiBuZWVkZWQgdG8gc2F2ZSByZXNvdXJjZXNcclxuLy8gXHRcdFx0Y29uc3Qgc3VwYWJhc2VBZG1pbiA9IGNyZWF0ZUNsaWVudChcclxuLy8gXHRcdFx0XHRwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhLFxyXG4vLyBcdFx0XHRcdHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkhLFxyXG4vLyBcdFx0XHRcdHsgYXV0aDogeyBwZXJzaXN0U2Vzc2lvbjogZmFsc2UgfSB9LFxyXG4vLyBcdFx0XHQpO1xyXG5cclxuLy8gXHRcdFx0Y29uc3QgeyBkYXRhOiByb2xlRGF0YSB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4vLyBcdFx0XHRcdC5mcm9tKFwidXNlcl9yb2xlc1wiKVxyXG4vLyBcdFx0XHRcdC5zZWxlY3QoXCJyb2xlcyhuYW1lKVwiKVxyXG4vLyBcdFx0XHRcdC5lcShcInVzZXJfaWRcIiwgdXNlci5pZClcclxuLy8gXHRcdFx0XHQuc2luZ2xlKCk7XHJcblxyXG4vLyBcdFx0XHQvLyBAdHMtaWdub3JlXHJcbi8vIFx0XHRcdGNvbnN0IHJvbGVOYW1lID0gcm9sZURhdGE/LnJvbGVzPy5uYW1lIHx8IHJvbGVEYXRhPy5yb2xlcz8uWzBdPy5uYW1lO1xyXG4vLyBcdFx0XHRjb25zdCB1c2VyUm9sZSA9IHJvbGVOYW1lID8gcm9sZU5hbWUudG9Mb3dlckNhc2UoKSA6IFwic3R1ZGVudFwiO1xyXG5cclxuLy8gXHRcdFx0Y29uc3QgZGFzaGJvYXJkTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xyXG4vLyBcdFx0XHRcdG1hbmFnaW5nX2RpcmVjdG9yOiBcIi9tYW5hZ2luZy1kaXJlY3RvclwiLFxyXG4vLyBcdFx0XHRcdHNlY3JldGFyeTogXCIvc2VjcmV0YXJ5XCIsXHJcbi8vIFx0XHRcdFx0c3lzdGVtX2FkbWluaXN0cmF0b3I6IFwiL3N5c3RlbS1hZG1pbmlzdHJhdG9yXCIsXHJcbi8vIFx0XHRcdFx0dGVhY2hlcjogXCIvdGVhY2hlclwiLFxyXG4vLyBcdFx0XHRcdHN0dWRlbnQ6IFwiL3N0dWRlbnRcIixcclxuLy8gXHRcdFx0XHRwYXJlbnQ6IFwiL3BhcmVudFwiLFxyXG4vLyBcdFx0XHR9O1xyXG5cclxuLy8gXHRcdFx0Y29uc3QgdGFyZ2V0UGF0aCA9IGRhc2hib2FyZE1hcFt1c2VyUm9sZV0gfHwgXCIvc3R1ZGVudFwiO1xyXG5cclxuLy8gXHRcdFx0Ly8gT25seSByZWRpcmVjdCBpZiBub3QgYWxyZWFkeSB0aGVyZVxyXG4vLyBcdFx0XHRpZiAocGF0aCAhPT0gdGFyZ2V0UGF0aCkge1xyXG4vLyBcdFx0XHRcdHJldHVybiByZWRpcmVjdChuZXcgVVJMKHRhcmdldFBhdGgsIHJlcXVlc3QudXJsKSk7XHJcbi8vIFx0XHRcdH1cclxuLy8gXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcbi8vIFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJNaWRkbGV3YXJlIFJvbGUgRmV0Y2ggRXJyb3I6XCIsIGVycm9yKTtcclxuLy8gXHRcdFx0Ly8gRmFsbGJhY2sgdG8gc3R1ZGVudCBpZiByb2xlIGZldGNoIGZhaWxzXHJcbi8vIFx0XHRcdHJldHVybiByZWRpcmVjdChuZXcgVVJMKFwiL3N0dWRlbnRcIiwgcmVxdWVzdC51cmwpKTtcclxuLy8gXHRcdH1cclxuLy8gXHR9XHJcblxyXG4vLyBcdHJldHVybiByZXNwb25zZTtcclxuLy8gfVxyXG5cclxuLy8gZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuLy8gXHRtYXRjaGVyOiBbXHJcbi8vIFx0XHQvKlxyXG4vLyBcdFx0ICogTWF0Y2ggYWxsIHJlcXVlc3QgcGF0aHMgZXhjZXB0IGZvcjpcclxuLy8gXHRcdCAqIC0gX25leHQvc3RhdGljIChzdGF0aWMgZmlsZXMpXHJcbi8vIFx0XHQgKiAtIF9uZXh0L2ltYWdlIChpbWFnZSBvcHRpbWl6YXRpb24gZmlsZXMpXHJcbi8vIFx0XHQgKiAtIGZhdmljb24uaWNvIChmYXZpY29uIGZpbGUpXHJcbi8vIFx0XHQgKiAtIHB1YmxpYyBmb2xkZXIgYXNzZXRzIChpbWFnZXMsIGV0YylcclxuLy8gXHRcdCAqIC0gYXBpIHJvdXRlcyAoaWYgYW55IGFyZSBwdWJsaWMpXHJcbi8vIFx0XHQgKi9cclxuLy8gXHRcdFwiLygoPyFfbmV4dC9zdGF0aWN8X25leHQvaW1hZ2V8ZmF2aWNvbi5pY298LipcXFxcLig/OnN2Z3xwbmd8anBnfGpwZWd8Z2lmfHdlYnApJCkuKilcIixcclxuLy8gXHRdLFxyXG4vLyB9O1xyXG5cclxuLy8gaW1wb3J0IHsgdHlwZSBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XHJcbi8vIGltcG9ydCB7IGNyZWF0ZVNlcnZlckNsaWVudCB9IGZyb20gXCJAc3VwYWJhc2Uvc3NyXCI7XHJcblxyXG4vLyBleHBvcnQgYXN5bmMgZnVuY3Rpb24gbWlkZGxld2FyZShyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4vLyBcdC8vIDEuIENyZWF0ZSBhbiBpbml0aWFsIHJlc3BvbnNlXHJcbi8vIFx0bGV0IHN1cGFiYXNlUmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UubmV4dCh7XHJcbi8vIFx0XHRyZXF1ZXN0LFxyXG4vLyBcdH0pO1xyXG5cclxuLy8gXHRjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZVNlcnZlckNsaWVudChcclxuLy8gXHRcdHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXHJcbi8vIFx0XHRwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSEsXHJcbi8vIFx0XHR7XHJcbi8vIFx0XHRcdGNvb2tpZXM6IHtcclxuLy8gXHRcdFx0XHRnZXRBbGwoKSB7XHJcbi8vIFx0XHRcdFx0XHRyZXR1cm4gcmVxdWVzdC5jb29raWVzLmdldEFsbCgpO1xyXG4vLyBcdFx0XHRcdH0sXHJcbi8vIFx0XHRcdFx0c2V0QWxsKGNvb2tpZXNUb1NldCkge1xyXG4vLyBcdFx0XHRcdFx0Ly8gRml4OiBVcGRhdGUgYm90aCB0aGUgUmVxdWVzdCAoZm9yIHRoZSBhcHApIGFuZCBSZXNwb25zZSAoZm9yIHRoZSBicm93c2VyKVxyXG4vLyBcdFx0XHRcdFx0Y29va2llc1RvU2V0LmZvckVhY2goKHsgbmFtZSwgdmFsdWUsIG9wdGlvbnMgfSkgPT5cclxuLy8gXHRcdFx0XHRcdFx0cmVxdWVzdC5jb29raWVzLnNldChuYW1lLCB2YWx1ZSksXHJcbi8vIFx0XHRcdFx0XHQpO1xyXG5cclxuLy8gXHRcdFx0XHRcdHN1cGFiYXNlUmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UubmV4dCh7XHJcbi8vIFx0XHRcdFx0XHRcdHJlcXVlc3QsXHJcbi8vIFx0XHRcdFx0XHR9KTtcclxuXHJcbi8vIFx0XHRcdFx0XHRjb29raWVzVG9TZXQuZm9yRWFjaCgoeyBuYW1lLCB2YWx1ZSwgb3B0aW9ucyB9KSA9PlxyXG4vLyBcdFx0XHRcdFx0XHRzdXBhYmFzZVJlc3BvbnNlLmNvb2tpZXMuc2V0KG5hbWUsIHZhbHVlLCBvcHRpb25zKSxcclxuLy8gXHRcdFx0XHRcdCk7XHJcbi8vIFx0XHRcdFx0fSxcclxuLy8gXHRcdFx0fSxcclxuLy8gXHRcdH0sXHJcbi8vIFx0KTtcclxuXHJcbi8vIFx0Ly8gMi4gUmVmcmVzaCBTZXNzaW9uXHJcbi8vIFx0Ly8gVGhpcyB3aWxsIHRyaWdnZXIgJ3NldEFsbCcgaWYgdGhlIHRva2VuIG5lZWRzIHJlZnJlc2hpbmdcclxuLy8gXHRjb25zdCB7XHJcbi8vIFx0XHRkYXRhOiB7IHVzZXIgfSxcclxuLy8gXHR9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKCk7XHJcblxyXG4vLyBcdHJldHVybiBzdXBhYmFzZVJlc3BvbnNlO1xyXG4vLyB9XHJcblxyXG4vLyBleHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4vLyBcdG1hdGNoZXI6IFtcIi8oKD8hX25leHQvc3RhdGljfF9uZXh0L2ltYWdlfGZhdmljb24uaWNvfHB1YmxpY3xhcGkpLiopXCJdLFxyXG4vLyB9O1xyXG4iXSwibmFtZXMiOlsiY3JlYXRlU2VydmVyQ2xpZW50IiwiY3JlYXRlQ2xpZW50IiwiTmV4dFJlc3BvbnNlIiwibWlkZGxld2FyZSIsInJlcXVlc3QiLCJyZXNwb25zZSIsIm5leHQiLCJoZWFkZXJzIiwic3VwYWJhc2UiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJjb29raWVzIiwiZ2V0QWxsIiwic2V0QWxsIiwiY29va2llc1RvU2V0IiwiZm9yRWFjaCIsIm5hbWUiLCJ2YWx1ZSIsIm9wdGlvbnMiLCJzZXQiLCJkYXRhIiwidXNlciIsImF1dGgiLCJnZXRVc2VyIiwic3VwYWJhc2VBZG1pbiIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJwZXJzaXN0U2Vzc2lvbiIsInBhdGgiLCJuZXh0VXJsIiwicGF0aG5hbWUiLCJpc1B1YmxpY1JvdXRlIiwic3RhcnRzV2l0aCIsImlzRGFzaGJvYXJkUm91dGUiLCJyZWRpcmVjdCIsInVybCIsInJlZGlyZWN0UmVzcG9uc2UiLCJjb29raWUiLCJVUkwiLCJyb2xlRGF0YSIsImZyb20iLCJzZWxlY3QiLCJlcSIsImlkIiwic2luZ2xlIiwicm9sZU5hbWUiLCJyb2xlcyIsInVzZXJSb2xlIiwidG9Mb3dlckNhc2UiLCJkYXNoYm9hcmRNYXAiLCJtYW5hZ2luZ19kaXJlY3RvciIsInNlY3JldGFyeSIsInN5c3RlbV9hZG1pbmlzdHJhdG9yIiwidGVhY2hlciIsInN0dWRlbnQiLCJwYXJlbnQiLCJ0YXJnZXRQYXRoIiwiZXJyb3IiLCJjb25zb2xlIiwiY29uZmlnIiwibWF0Y2hlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(middleware)/./src/middleware.ts\n");

/***/ })

});