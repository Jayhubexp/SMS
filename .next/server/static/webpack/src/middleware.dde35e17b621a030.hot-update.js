"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("src/middleware",{

/***/ "(middleware)/./src/middleware.ts":
/*!***************************!*\
  !*** ./src/middleware.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/ssr */ \"(middleware)/./node_modules/@supabase/ssr/dist/module/index.js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @supabase/supabase-js */ \"(middleware)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n\n\n\nasync function middleware(request) {\n    // 1. Initialize Response\n    let response = next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.next({\n        request: {\n            headers: request.headers\n        }\n    });\n    // 2. Create Supabase Client (Handles Auth Cookies)\n    const supabase = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(\"https://svakdlwfoevmbdejhtyg.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN2YWtkbHdmb2V2bWJkZWpodHlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ1MDY4NzAsImV4cCI6MjA4MDA4Mjg3MH0.Dbgt7kSPzK1ZieC5U4I_atBDwWtRPDVNSXu5ZpfXg38\", {\n        cookies: {\n            getAll () {\n                return request.cookies.getAll();\n            },\n            setAll (cookiesToSet) {\n                cookiesToSet.forEach(({ name, value, options })=>request.cookies.set(name, value));\n                response = next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.next({\n                    request\n                });\n                cookiesToSet.forEach(({ name, value, options })=>response.cookies.set(name, value, options));\n            }\n        }\n    });\n    // 3. Refresh Session & Get User\n    // This updates the auth cookie if needed\n    const { data: { user } } = await supabase.auth.getUser();\n    // 4. Define Paths\n    const path = request.nextUrl.pathname;\n    const isPublicRoute = path === \"/\" || path.startsWith(\"/sign-in\");\n    // Dashboard/Protected Routes\n    const isDashboardRoute = path.startsWith(\"/managing-director\") || path.startsWith(\"/secretary\") || path.startsWith(\"/teacher\") || path.startsWith(\"/student\") || path.startsWith(\"/parent\") || path.startsWith(\"/profile\") || path.startsWith(\"/list\") || path.startsWith(\"/finance\") || path.startsWith(\"/settings\");\n    // Helper: Redirect with cookies preserved\n    const redirect = (url)=>{\n        const redirectResponse = next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(url);\n        const cookiesToSet = response.cookies.getAll();\n        cookiesToSet.forEach((cookie)=>redirectResponse.cookies.set(cookie.name, cookie.value));\n        return redirectResponse;\n    };\n    // --- LOGIC BLOCK 1: UNAUTHENTICATED USERS ---\n    if (!user) {\n        // If trying to access a protected route, redirect to sign-in\n        if (isDashboardRoute) {\n            return redirect(new URL(\"/sign-in\", request.url));\n        }\n        // Allow public routes (Landing page / Sign-in)\n        return response;\n    }\n    // --- LOGIC BLOCK 2: AUTHENTICATED USERS ---\n    // Redirect authenticated users away from Public Routes (Login/Home) to Dashboard\n    if (isPublicRoute) {\n        try {\n            // Create Admin Client for Role Check (Bypasses RLS)\n            // Only created if needed to save resources\n            const supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(\"https://svakdlwfoevmbdejhtyg.supabase.co\", process.env.SUPABASE_SERVICE_ROLE_KEY, {\n                auth: {\n                    persistSession: false\n                }\n            });\n            const { data: roleData } = await supabaseAdmin.from(\"user_roles\").select(\"roles(name)\").eq(\"user_id\", user.id).single();\n            // @ts-ignore\n            const roleName = roleData?.roles?.name || roleData?.roles?.[0]?.name;\n            const userRole = roleName ? roleName.toLowerCase() : \"student\";\n            const dashboardMap = {\n                managing_director: \"/managing-director\",\n                secretary: \"/secretary\",\n                system_administrator: \"/system-administrator\",\n                teacher: \"/teacher\",\n                student: \"/student\",\n                parent: \"/parent\"\n            };\n            const targetPath = dashboardMap[userRole] || \"/student\";\n            // Only redirect if not already there\n            if (path !== targetPath) {\n                return redirect(new URL(targetPath, request.url));\n            }\n        } catch (error) {\n            console.error(\"Middleware Role Fetch Error:\", error);\n            // Fallback to student if role fetch fails\n            return redirect(new URL(\"/student\", request.url));\n        }\n    }\n    return response;\n}\nconst config = {\n    matcher: [\n        /*\r\n\t\t * Match all request paths except for:\r\n\t\t * - _next/static (static files)\r\n\t\t * - _next/image (image optimization files)\r\n\t\t * - favicon.ico (favicon file)\r\n\t\t * - public folder assets (images, etc)\r\n\t\t * - api routes (if any are public)\r\n\t\t */ \"/((?!_next/static|_next/image|favicon.ico|.*\\\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)\"\n    ]\n}; // import { type NextRequest, NextResponse } from \"next/server\";\n // import { createServerClient } from \"@supabase/ssr\";\n // export async function middleware(request: NextRequest) {\n // \t// 1. Create an initial response\n // \tlet supabaseResponse = NextResponse.next({\n // \t\trequest,\n // \t});\n // \tconst supabase = createServerClient(\n // \t\tprocess.env.NEXT_PUBLIC_SUPABASE_URL!,\n // \t\tprocess.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n // \t\t{\n // \t\t\tcookies: {\n // \t\t\t\tgetAll() {\n // \t\t\t\t\treturn request.cookies.getAll();\n // \t\t\t\t},\n // \t\t\t\tsetAll(cookiesToSet) {\n // \t\t\t\t\t// Fix: Update both the Request (for the app) and Response (for the browser)\n // \t\t\t\t\tcookiesToSet.forEach(({ name, value, options }) =>\n // \t\t\t\t\t\trequest.cookies.set(name, value),\n // \t\t\t\t\t);\n // \t\t\t\t\tsupabaseResponse = NextResponse.next({\n // \t\t\t\t\t\trequest,\n // \t\t\t\t\t});\n // \t\t\t\t\tcookiesToSet.forEach(({ name, value, options }) =>\n // \t\t\t\t\t\tsupabaseResponse.cookies.set(name, value, options),\n // \t\t\t\t\t);\n // \t\t\t\t},\n // \t\t\t},\n // \t\t},\n // \t);\n // \t// 2. Refresh Session\n // \t// This will trigger 'setAll' if the token needs refreshing\n // \tconst {\n // \t\tdata: { user },\n // \t} = await supabase.auth.getUser();\n // \treturn supabaseResponse;\n // }\n // export const config = {\n // \tmatcher: [\"/((?!_next/static|_next/image|favicon.ico|public|api).*)\"],\n // };\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vc3JjL21pZGRsZXdhcmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBbUQ7QUFDRTtBQUNRO0FBRXRELGVBQWVHLFdBQVdDLE9BQW9CO0lBQ3BELHlCQUF5QjtJQUN6QixJQUFJQyxXQUFXSCxxREFBWUEsQ0FBQ0ksSUFBSSxDQUFDO1FBQ2hDRixTQUFTO1lBQ1JHLFNBQVNILFFBQVFHLE9BQU87UUFDekI7SUFDRDtJQUVBLG1EQUFtRDtJQUNuRCxNQUFNQyxXQUFXUixpRUFBa0JBLENBQ2xDUywwQ0FBb0MsRUFDcENBLGtOQUF5QyxFQUN6QztRQUNDSSxTQUFTO1lBQ1JDO2dCQUNDLE9BQU9WLFFBQVFTLE9BQU8sQ0FBQ0MsTUFBTTtZQUM5QjtZQUNBQyxRQUFPQyxZQUFZO2dCQUNsQkEsYUFBYUMsT0FBTyxDQUFDLENBQUMsRUFBRUMsSUFBSSxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sRUFBRSxHQUM3Q2hCLFFBQVFTLE9BQU8sQ0FBQ1EsR0FBRyxDQUFDSCxNQUFNQztnQkFFM0JkLFdBQVdILHFEQUFZQSxDQUFDSSxJQUFJLENBQUM7b0JBQzVCRjtnQkFDRDtnQkFDQVksYUFBYUMsT0FBTyxDQUFDLENBQUMsRUFBRUMsSUFBSSxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sRUFBRSxHQUM3Q2YsU0FBU1EsT0FBTyxDQUFDUSxHQUFHLENBQUNILE1BQU1DLE9BQU9DO1lBRXBDO1FBQ0Q7SUFDRDtJQUdELGdDQUFnQztJQUNoQyx5Q0FBeUM7SUFDekMsTUFBTSxFQUNMRSxNQUFNLEVBQUVDLElBQUksRUFBRSxFQUNkLEdBQUcsTUFBTWYsU0FBU2dCLElBQUksQ0FBQ0MsT0FBTztJQUUvQixrQkFBa0I7SUFDbEIsTUFBTUMsT0FBT3RCLFFBQVF1QixPQUFPLENBQUNDLFFBQVE7SUFDckMsTUFBTUMsZ0JBQWdCSCxTQUFTLE9BQU9BLEtBQUtJLFVBQVUsQ0FBQztJQUV0RCw2QkFBNkI7SUFDN0IsTUFBTUMsbUJBQ0xMLEtBQUtJLFVBQVUsQ0FBQyx5QkFDaEJKLEtBQUtJLFVBQVUsQ0FBQyxpQkFDaEJKLEtBQUtJLFVBQVUsQ0FBQyxlQUNoQkosS0FBS0ksVUFBVSxDQUFDLGVBQ2hCSixLQUFLSSxVQUFVLENBQUMsY0FDaEJKLEtBQUtJLFVBQVUsQ0FBQyxlQUNoQkosS0FBS0ksVUFBVSxDQUFDLFlBQ2hCSixLQUFLSSxVQUFVLENBQUMsZUFDaEJKLEtBQUtJLFVBQVUsQ0FBQztJQUVqQiwwQ0FBMEM7SUFDMUMsTUFBTUUsV0FBVyxDQUFDQztRQUNqQixNQUFNQyxtQkFBbUJoQyxxREFBWUEsQ0FBQzhCLFFBQVEsQ0FBQ0M7UUFDL0MsTUFBTWpCLGVBQWVYLFNBQVNRLE9BQU8sQ0FBQ0MsTUFBTTtRQUM1Q0UsYUFBYUMsT0FBTyxDQUFDLENBQUNrQixTQUNyQkQsaUJBQWlCckIsT0FBTyxDQUFDUSxHQUFHLENBQUNjLE9BQU9qQixJQUFJLEVBQUVpQixPQUFPaEIsS0FBSztRQUV2RCxPQUFPZTtJQUNSO0lBRUEsK0NBQStDO0lBRS9DLElBQUksQ0FBQ1gsTUFBTTtRQUNWLDZEQUE2RDtRQUM3RCxJQUFJUSxrQkFBa0I7WUFDckIsT0FBT0MsU0FBUyxJQUFJSSxJQUFJLFlBQVloQyxRQUFRNkIsR0FBRztRQUNoRDtRQUNBLCtDQUErQztRQUMvQyxPQUFPNUI7SUFDUjtJQUVBLDZDQUE2QztJQUU3QyxpRkFBaUY7SUFDakYsSUFBSXdCLGVBQWU7UUFDbEIsSUFBSTtZQUNILG9EQUFvRDtZQUNwRCwyQ0FBMkM7WUFDM0MsTUFBTVEsZ0JBQWdCcEMsbUVBQVlBLENBQ2pDUSwwQ0FBb0MsRUFDcENBLFFBQVFDLEdBQUcsQ0FBQzRCLHlCQUF5QixFQUNyQztnQkFBRWQsTUFBTTtvQkFBRWUsZ0JBQWdCO2dCQUFNO1lBQUU7WUFHbkMsTUFBTSxFQUFFakIsTUFBTWtCLFFBQVEsRUFBRSxHQUFHLE1BQU1ILGNBQy9CSSxJQUFJLENBQUMsY0FDTEMsTUFBTSxDQUFDLGVBQ1BDLEVBQUUsQ0FBQyxXQUFXcEIsS0FBS3FCLEVBQUUsRUFDckJDLE1BQU07WUFFUixhQUFhO1lBQ2IsTUFBTUMsV0FBV04sVUFBVU8sT0FBTzdCLFFBQVFzQixVQUFVTyxPQUFPLENBQUMsRUFBRSxFQUFFN0I7WUFDaEUsTUFBTThCLFdBQVdGLFdBQVdBLFNBQVNHLFdBQVcsS0FBSztZQUVyRCxNQUFNQyxlQUF1QztnQkFDNUNDLG1CQUFtQjtnQkFDbkJDLFdBQVc7Z0JBQ1hDLHNCQUFzQjtnQkFDdEJDLFNBQVM7Z0JBQ1RDLFNBQVM7Z0JBQ1RDLFFBQVE7WUFDVDtZQUVBLE1BQU1DLGFBQWFQLFlBQVksQ0FBQ0YsU0FBUyxJQUFJO1lBRTdDLHFDQUFxQztZQUNyQyxJQUFJdEIsU0FBUytCLFlBQVk7Z0JBQ3hCLE9BQU96QixTQUFTLElBQUlJLElBQUlxQixZQUFZckQsUUFBUTZCLEdBQUc7WUFDaEQ7UUFDRCxFQUFFLE9BQU95QixPQUFPO1lBQ2ZDLFFBQVFELEtBQUssQ0FBQyxnQ0FBZ0NBO1lBQzlDLDBDQUEwQztZQUMxQyxPQUFPMUIsU0FBUyxJQUFJSSxJQUFJLFlBQVloQyxRQUFRNkIsR0FBRztRQUNoRDtJQUNEO0lBRUEsT0FBTzVCO0FBQ1I7QUFFTyxNQUFNdUQsU0FBUztJQUNyQkMsU0FBUztRQUNSOzs7Ozs7O0dBT0MsR0FDRDtLQUNBO0FBQ0YsRUFBRSxDQUVGLGdFQUFnRTtDQUNoRSxzREFBc0Q7Q0FFdEQsMkRBQTJEO0NBQzNELG9DQUFvQztDQUNwQyw4Q0FBOEM7Q0FDOUMsYUFBYTtDQUNiLE9BQU87Q0FFUCx3Q0FBd0M7Q0FDeEMsMkNBQTJDO0NBQzNDLGdEQUFnRDtDQUNoRCxNQUFNO0NBQ04sZ0JBQWdCO0NBQ2hCLGlCQUFpQjtDQUNqQix3Q0FBd0M7Q0FDeEMsU0FBUztDQUNULDZCQUE2QjtDQUM3QixvRkFBb0Y7Q0FDcEYsMERBQTBEO0NBQzFELDBDQUEwQztDQUMxQyxVQUFVO0NBRVYsOENBQThDO0NBQzlDLGlCQUFpQjtDQUNqQixXQUFXO0NBRVgsMERBQTBEO0NBQzFELDREQUE0RDtDQUM1RCxVQUFVO0NBQ1YsU0FBUztDQUNULFFBQVE7Q0FDUixPQUFPO0NBQ1AsTUFBTTtDQUVOLHlCQUF5QjtDQUN6QiwrREFBK0Q7Q0FDL0QsV0FBVztDQUNYLG9CQUFvQjtDQUNwQixzQ0FBc0M7Q0FFdEMsNEJBQTRCO0NBQzVCLElBQUk7Q0FFSiwwQkFBMEI7Q0FDMUIsMEVBQTBFO0NBQzFFLEtBQUsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL21pZGRsZXdhcmUudHM/ZDE5OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVTZXJ2ZXJDbGllbnQgfSBmcm9tIFwiQHN1cGFiYXNlL3NzclwiO1xyXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tIFwiQHN1cGFiYXNlL3N1cGFiYXNlLWpzXCI7XHJcbmltcG9ydCB7IHR5cGUgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1pZGRsZXdhcmUocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuXHQvLyAxLiBJbml0aWFsaXplIFJlc3BvbnNlXHJcblx0bGV0IHJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLm5leHQoe1xyXG5cdFx0cmVxdWVzdDoge1xyXG5cdFx0XHRoZWFkZXJzOiByZXF1ZXN0LmhlYWRlcnMsXHJcblx0XHR9LFxyXG5cdH0pO1xyXG5cclxuXHQvLyAyLiBDcmVhdGUgU3VwYWJhc2UgQ2xpZW50IChIYW5kbGVzIEF1dGggQ29va2llcylcclxuXHRjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZVNlcnZlckNsaWVudChcclxuXHRcdHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXHJcblx0XHRwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSEsXHJcblx0XHR7XHJcblx0XHRcdGNvb2tpZXM6IHtcclxuXHRcdFx0XHRnZXRBbGwoKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gcmVxdWVzdC5jb29raWVzLmdldEFsbCgpO1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0c2V0QWxsKGNvb2tpZXNUb1NldCkge1xyXG5cdFx0XHRcdFx0Y29va2llc1RvU2V0LmZvckVhY2goKHsgbmFtZSwgdmFsdWUsIG9wdGlvbnMgfSkgPT5cclxuXHRcdFx0XHRcdFx0cmVxdWVzdC5jb29raWVzLnNldChuYW1lLCB2YWx1ZSksXHJcblx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0cmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UubmV4dCh7XHJcblx0XHRcdFx0XHRcdHJlcXVlc3QsXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdGNvb2tpZXNUb1NldC5mb3JFYWNoKCh7IG5hbWUsIHZhbHVlLCBvcHRpb25zIH0pID0+XHJcblx0XHRcdFx0XHRcdHJlc3BvbnNlLmNvb2tpZXMuc2V0KG5hbWUsIHZhbHVlLCBvcHRpb25zKSxcclxuXHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0fSxcclxuXHRcdH0sXHJcblx0KTtcclxuXHJcblx0Ly8gMy4gUmVmcmVzaCBTZXNzaW9uICYgR2V0IFVzZXJcclxuXHQvLyBUaGlzIHVwZGF0ZXMgdGhlIGF1dGggY29va2llIGlmIG5lZWRlZFxyXG5cdGNvbnN0IHtcclxuXHRcdGRhdGE6IHsgdXNlciB9LFxyXG5cdH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKTtcclxuXHJcblx0Ly8gNC4gRGVmaW5lIFBhdGhzXHJcblx0Y29uc3QgcGF0aCA9IHJlcXVlc3QubmV4dFVybC5wYXRobmFtZTtcclxuXHRjb25zdCBpc1B1YmxpY1JvdXRlID0gcGF0aCA9PT0gXCIvXCIgfHwgcGF0aC5zdGFydHNXaXRoKFwiL3NpZ24taW5cIik7XHJcblxyXG5cdC8vIERhc2hib2FyZC9Qcm90ZWN0ZWQgUm91dGVzXHJcblx0Y29uc3QgaXNEYXNoYm9hcmRSb3V0ZSA9XHJcblx0XHRwYXRoLnN0YXJ0c1dpdGgoXCIvbWFuYWdpbmctZGlyZWN0b3JcIikgfHxcclxuXHRcdHBhdGguc3RhcnRzV2l0aChcIi9zZWNyZXRhcnlcIikgfHxcclxuXHRcdHBhdGguc3RhcnRzV2l0aChcIi90ZWFjaGVyXCIpIHx8XHJcblx0XHRwYXRoLnN0YXJ0c1dpdGgoXCIvc3R1ZGVudFwiKSB8fFxyXG5cdFx0cGF0aC5zdGFydHNXaXRoKFwiL3BhcmVudFwiKSB8fFxyXG5cdFx0cGF0aC5zdGFydHNXaXRoKFwiL3Byb2ZpbGVcIikgfHxcclxuXHRcdHBhdGguc3RhcnRzV2l0aChcIi9saXN0XCIpIHx8XHJcblx0XHRwYXRoLnN0YXJ0c1dpdGgoXCIvZmluYW5jZVwiKSB8fFxyXG5cdFx0cGF0aC5zdGFydHNXaXRoKFwiL3NldHRpbmdzXCIpO1xyXG5cclxuXHQvLyBIZWxwZXI6IFJlZGlyZWN0IHdpdGggY29va2llcyBwcmVzZXJ2ZWRcclxuXHRjb25zdCByZWRpcmVjdCA9ICh1cmw6IFVSTCkgPT4ge1xyXG5cdFx0Y29uc3QgcmVkaXJlY3RSZXNwb25zZSA9IE5leHRSZXNwb25zZS5yZWRpcmVjdCh1cmwpO1xyXG5cdFx0Y29uc3QgY29va2llc1RvU2V0ID0gcmVzcG9uc2UuY29va2llcy5nZXRBbGwoKTtcclxuXHRcdGNvb2tpZXNUb1NldC5mb3JFYWNoKChjb29raWUpID0+XHJcblx0XHRcdHJlZGlyZWN0UmVzcG9uc2UuY29va2llcy5zZXQoY29va2llLm5hbWUsIGNvb2tpZS52YWx1ZSksXHJcblx0XHQpO1xyXG5cdFx0cmV0dXJuIHJlZGlyZWN0UmVzcG9uc2U7XHJcblx0fTtcclxuXHJcblx0Ly8gLS0tIExPR0lDIEJMT0NLIDE6IFVOQVVUSEVOVElDQVRFRCBVU0VSUyAtLS1cclxuXHJcblx0aWYgKCF1c2VyKSB7XHJcblx0XHQvLyBJZiB0cnlpbmcgdG8gYWNjZXNzIGEgcHJvdGVjdGVkIHJvdXRlLCByZWRpcmVjdCB0byBzaWduLWluXHJcblx0XHRpZiAoaXNEYXNoYm9hcmRSb3V0ZSkge1xyXG5cdFx0XHRyZXR1cm4gcmVkaXJlY3QobmV3IFVSTChcIi9zaWduLWluXCIsIHJlcXVlc3QudXJsKSk7XHJcblx0XHR9XHJcblx0XHQvLyBBbGxvdyBwdWJsaWMgcm91dGVzIChMYW5kaW5nIHBhZ2UgLyBTaWduLWluKVxyXG5cdFx0cmV0dXJuIHJlc3BvbnNlO1xyXG5cdH1cclxuXHJcblx0Ly8gLS0tIExPR0lDIEJMT0NLIDI6IEFVVEhFTlRJQ0FURUQgVVNFUlMgLS0tXHJcblxyXG5cdC8vIFJlZGlyZWN0IGF1dGhlbnRpY2F0ZWQgdXNlcnMgYXdheSBmcm9tIFB1YmxpYyBSb3V0ZXMgKExvZ2luL0hvbWUpIHRvIERhc2hib2FyZFxyXG5cdGlmIChpc1B1YmxpY1JvdXRlKSB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQvLyBDcmVhdGUgQWRtaW4gQ2xpZW50IGZvciBSb2xlIENoZWNrIChCeXBhc3NlcyBSTFMpXHJcblx0XHRcdC8vIE9ubHkgY3JlYXRlZCBpZiBuZWVkZWQgdG8gc2F2ZSByZXNvdXJjZXNcclxuXHRcdFx0Y29uc3Qgc3VwYWJhc2VBZG1pbiA9IGNyZWF0ZUNsaWVudChcclxuXHRcdFx0XHRwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhLFxyXG5cdFx0XHRcdHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkhLFxyXG5cdFx0XHRcdHsgYXV0aDogeyBwZXJzaXN0U2Vzc2lvbjogZmFsc2UgfSB9LFxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdFx0Y29uc3QgeyBkYXRhOiByb2xlRGF0YSB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG5cdFx0XHRcdC5mcm9tKFwidXNlcl9yb2xlc1wiKVxyXG5cdFx0XHRcdC5zZWxlY3QoXCJyb2xlcyhuYW1lKVwiKVxyXG5cdFx0XHRcdC5lcShcInVzZXJfaWRcIiwgdXNlci5pZClcclxuXHRcdFx0XHQuc2luZ2xlKCk7XHJcblxyXG5cdFx0XHQvLyBAdHMtaWdub3JlXHJcblx0XHRcdGNvbnN0IHJvbGVOYW1lID0gcm9sZURhdGE/LnJvbGVzPy5uYW1lIHx8IHJvbGVEYXRhPy5yb2xlcz8uWzBdPy5uYW1lO1xyXG5cdFx0XHRjb25zdCB1c2VyUm9sZSA9IHJvbGVOYW1lID8gcm9sZU5hbWUudG9Mb3dlckNhc2UoKSA6IFwic3R1ZGVudFwiO1xyXG5cclxuXHRcdFx0Y29uc3QgZGFzaGJvYXJkTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xyXG5cdFx0XHRcdG1hbmFnaW5nX2RpcmVjdG9yOiBcIi9tYW5hZ2luZy1kaXJlY3RvclwiLFxyXG5cdFx0XHRcdHNlY3JldGFyeTogXCIvc2VjcmV0YXJ5XCIsXHJcblx0XHRcdFx0c3lzdGVtX2FkbWluaXN0cmF0b3I6IFwiL3N5c3RlbS1hZG1pbmlzdHJhdG9yXCIsXHJcblx0XHRcdFx0dGVhY2hlcjogXCIvdGVhY2hlclwiLFxyXG5cdFx0XHRcdHN0dWRlbnQ6IFwiL3N0dWRlbnRcIixcclxuXHRcdFx0XHRwYXJlbnQ6IFwiL3BhcmVudFwiLFxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0Y29uc3QgdGFyZ2V0UGF0aCA9IGRhc2hib2FyZE1hcFt1c2VyUm9sZV0gfHwgXCIvc3R1ZGVudFwiO1xyXG5cclxuXHRcdFx0Ly8gT25seSByZWRpcmVjdCBpZiBub3QgYWxyZWFkeSB0aGVyZVxyXG5cdFx0XHRpZiAocGF0aCAhPT0gdGFyZ2V0UGF0aCkge1xyXG5cdFx0XHRcdHJldHVybiByZWRpcmVjdChuZXcgVVJMKHRhcmdldFBhdGgsIHJlcXVlc3QudXJsKSk7XHJcblx0XHRcdH1cclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJNaWRkbGV3YXJlIFJvbGUgRmV0Y2ggRXJyb3I6XCIsIGVycm9yKTtcclxuXHRcdFx0Ly8gRmFsbGJhY2sgdG8gc3R1ZGVudCBpZiByb2xlIGZldGNoIGZhaWxzXHJcblx0XHRcdHJldHVybiByZWRpcmVjdChuZXcgVVJMKFwiL3N0dWRlbnRcIiwgcmVxdWVzdC51cmwpKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJldHVybiByZXNwb25zZTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuXHRtYXRjaGVyOiBbXHJcblx0XHQvKlxyXG5cdFx0ICogTWF0Y2ggYWxsIHJlcXVlc3QgcGF0aHMgZXhjZXB0IGZvcjpcclxuXHRcdCAqIC0gX25leHQvc3RhdGljIChzdGF0aWMgZmlsZXMpXHJcblx0XHQgKiAtIF9uZXh0L2ltYWdlIChpbWFnZSBvcHRpbWl6YXRpb24gZmlsZXMpXHJcblx0XHQgKiAtIGZhdmljb24uaWNvIChmYXZpY29uIGZpbGUpXHJcblx0XHQgKiAtIHB1YmxpYyBmb2xkZXIgYXNzZXRzIChpbWFnZXMsIGV0YylcclxuXHRcdCAqIC0gYXBpIHJvdXRlcyAoaWYgYW55IGFyZSBwdWJsaWMpXHJcblx0XHQgKi9cclxuXHRcdFwiLygoPyFfbmV4dC9zdGF0aWN8X25leHQvaW1hZ2V8ZmF2aWNvbi5pY298LipcXFxcLig/OnN2Z3xwbmd8anBnfGpwZWd8Z2lmfHdlYnApJCkuKilcIixcclxuXHRdLFxyXG59O1xyXG5cclxuLy8gaW1wb3J0IHsgdHlwZSBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XHJcbi8vIGltcG9ydCB7IGNyZWF0ZVNlcnZlckNsaWVudCB9IGZyb20gXCJAc3VwYWJhc2Uvc3NyXCI7XHJcblxyXG4vLyBleHBvcnQgYXN5bmMgZnVuY3Rpb24gbWlkZGxld2FyZShyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4vLyBcdC8vIDEuIENyZWF0ZSBhbiBpbml0aWFsIHJlc3BvbnNlXHJcbi8vIFx0bGV0IHN1cGFiYXNlUmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UubmV4dCh7XHJcbi8vIFx0XHRyZXF1ZXN0LFxyXG4vLyBcdH0pO1xyXG5cclxuLy8gXHRjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZVNlcnZlckNsaWVudChcclxuLy8gXHRcdHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXHJcbi8vIFx0XHRwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSEsXHJcbi8vIFx0XHR7XHJcbi8vIFx0XHRcdGNvb2tpZXM6IHtcclxuLy8gXHRcdFx0XHRnZXRBbGwoKSB7XHJcbi8vIFx0XHRcdFx0XHRyZXR1cm4gcmVxdWVzdC5jb29raWVzLmdldEFsbCgpO1xyXG4vLyBcdFx0XHRcdH0sXHJcbi8vIFx0XHRcdFx0c2V0QWxsKGNvb2tpZXNUb1NldCkge1xyXG4vLyBcdFx0XHRcdFx0Ly8gRml4OiBVcGRhdGUgYm90aCB0aGUgUmVxdWVzdCAoZm9yIHRoZSBhcHApIGFuZCBSZXNwb25zZSAoZm9yIHRoZSBicm93c2VyKVxyXG4vLyBcdFx0XHRcdFx0Y29va2llc1RvU2V0LmZvckVhY2goKHsgbmFtZSwgdmFsdWUsIG9wdGlvbnMgfSkgPT5cclxuLy8gXHRcdFx0XHRcdFx0cmVxdWVzdC5jb29raWVzLnNldChuYW1lLCB2YWx1ZSksXHJcbi8vIFx0XHRcdFx0XHQpO1xyXG5cclxuLy8gXHRcdFx0XHRcdHN1cGFiYXNlUmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UubmV4dCh7XHJcbi8vIFx0XHRcdFx0XHRcdHJlcXVlc3QsXHJcbi8vIFx0XHRcdFx0XHR9KTtcclxuXHJcbi8vIFx0XHRcdFx0XHRjb29raWVzVG9TZXQuZm9yRWFjaCgoeyBuYW1lLCB2YWx1ZSwgb3B0aW9ucyB9KSA9PlxyXG4vLyBcdFx0XHRcdFx0XHRzdXBhYmFzZVJlc3BvbnNlLmNvb2tpZXMuc2V0KG5hbWUsIHZhbHVlLCBvcHRpb25zKSxcclxuLy8gXHRcdFx0XHRcdCk7XHJcbi8vIFx0XHRcdFx0fSxcclxuLy8gXHRcdFx0fSxcclxuLy8gXHRcdH0sXHJcbi8vIFx0KTtcclxuXHJcbi8vIFx0Ly8gMi4gUmVmcmVzaCBTZXNzaW9uXHJcbi8vIFx0Ly8gVGhpcyB3aWxsIHRyaWdnZXIgJ3NldEFsbCcgaWYgdGhlIHRva2VuIG5lZWRzIHJlZnJlc2hpbmdcclxuLy8gXHRjb25zdCB7XHJcbi8vIFx0XHRkYXRhOiB7IHVzZXIgfSxcclxuLy8gXHR9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKCk7XHJcblxyXG4vLyBcdHJldHVybiBzdXBhYmFzZVJlc3BvbnNlO1xyXG4vLyB9XHJcblxyXG4vLyBleHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4vLyBcdG1hdGNoZXI6IFtcIi8oKD8hX25leHQvc3RhdGljfF9uZXh0L2ltYWdlfGZhdmljb24uaWNvfHB1YmxpY3xhcGkpLiopXCJdLFxyXG4vLyB9O1xyXG4iXSwibmFtZXMiOlsiY3JlYXRlU2VydmVyQ2xpZW50IiwiY3JlYXRlQ2xpZW50IiwiTmV4dFJlc3BvbnNlIiwibWlkZGxld2FyZSIsInJlcXVlc3QiLCJyZXNwb25zZSIsIm5leHQiLCJoZWFkZXJzIiwic3VwYWJhc2UiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJjb29raWVzIiwiZ2V0QWxsIiwic2V0QWxsIiwiY29va2llc1RvU2V0IiwiZm9yRWFjaCIsIm5hbWUiLCJ2YWx1ZSIsIm9wdGlvbnMiLCJzZXQiLCJkYXRhIiwidXNlciIsImF1dGgiLCJnZXRVc2VyIiwicGF0aCIsIm5leHRVcmwiLCJwYXRobmFtZSIsImlzUHVibGljUm91dGUiLCJzdGFydHNXaXRoIiwiaXNEYXNoYm9hcmRSb3V0ZSIsInJlZGlyZWN0IiwidXJsIiwicmVkaXJlY3RSZXNwb25zZSIsImNvb2tpZSIsIlVSTCIsInN1cGFiYXNlQWRtaW4iLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwicGVyc2lzdFNlc3Npb24iLCJyb2xlRGF0YSIsImZyb20iLCJzZWxlY3QiLCJlcSIsImlkIiwic2luZ2xlIiwicm9sZU5hbWUiLCJyb2xlcyIsInVzZXJSb2xlIiwidG9Mb3dlckNhc2UiLCJkYXNoYm9hcmRNYXAiLCJtYW5hZ2luZ19kaXJlY3RvciIsInNlY3JldGFyeSIsInN5c3RlbV9hZG1pbmlzdHJhdG9yIiwidGVhY2hlciIsInN0dWRlbnQiLCJwYXJlbnQiLCJ0YXJnZXRQYXRoIiwiZXJyb3IiLCJjb25zb2xlIiwiY29uZmlnIiwibWF0Y2hlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(middleware)/./src/middleware.ts\n");

/***/ })

});